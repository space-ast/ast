import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as i,o as l}from"./app-Dafc0KC8.js";const p={};function e(d,s){return l(),a("div",null,[...s[0]||(s[0]=[i(`<h1 id="时间模块" tabindex="-1"><a class="header-anchor" href="#时间模块"><span>时间模块</span></a></h1><p><em>说明：本文档旨在帮助理解模块功能，具体API和行为请查阅源代码。</em></p><h2 id="模块概述" tabindex="-1"><a class="header-anchor" href="#模块概述"><span>模块概述</span></a></h2><p>Time模块提供了全面的时间处理功能，包括日期、时间、日期时间、儒略日、简约儒略日、时长以及时间系统转换等功能。该模块是天体力学和航天动力学计算的基础组件，支持各种时间表示形式之间的转换和操作。</p><h2 id="核心概念" tabindex="-1"><a class="header-anchor" href="#核心概念"><span>核心概念</span></a></h2><h3 id="时间表示类型" tabindex="-1"><a class="header-anchor" href="#时间表示类型"><span>时间表示类型</span></a></h3><p>模块定义了以下主要时间表示类型：</p><ol><li><p><strong>Date (日期)</strong></p><ul><li>表示年、月、日信息</li><li>支持闰年判断、月份天数计算、年中日计算等功能</li></ul></li><li><p><strong>Time (时间)</strong></p><ul><li>表示时、分、秒信息</li><li>支持时间规范化、总秒数计算等功能</li></ul></li><li><p><strong>DateTime (日期时间)</strong></p><ul><li>组合日期和时间信息</li><li>支持本地时间与UTC时间转换、日期时间规范化等功能</li></ul></li><li><p><strong>JulianDate (儒略日)</strong></p><ul><li>用于天文学的时间表示方法</li><li>支持日期时间与儒略日之间的转换</li></ul></li><li><p><strong>ModJulianDate (简约儒略日)</strong></p><ul><li>儒略日的简化形式</li><li>基于JulianDate类，提供更简洁的表示方式</li></ul></li><li><p><strong>时长类型</strong></p><ul><li><strong>ShortDuration</strong>: 短时长，使用double表示秒数</li><li><strong>LongDuration</strong>: 长时长，使用整数秒和小数秒分离表示</li><li><strong>DaySecDuration</strong>: 整数天 + 小数秒时长，适合长时间跨度表示</li></ul></li></ol><h3 id="时间系统" tabindex="-1"><a class="header-anchor" href="#时间系统"><span>时间系统</span></a></h3><p>模块支持以下时间系统之间的转换：</p><ul><li><strong>TAI (原子时)</strong>: 国际原子时</li><li><strong>TT (地球时)</strong>: 地球动力学时，用于天体力学计算</li><li><strong>GPS (GPS时)</strong>: 全球定位系统时间</li><li><strong>UTC (协调世界时)</strong>: 世界协调时间</li></ul><h2 id="用法示例" tabindex="-1"><a class="header-anchor" href="#用法示例"><span>用法示例</span></a></h2><h3 id="_1-日期时间创建与规范化" tabindex="-1"><a class="header-anchor" href="#_1-日期时间创建与规范化"><span>1. 日期时间创建与规范化</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;AstCore/DateTime.hpp&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    AST_USING_NAMESPACE</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 创建日期时间对象 </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    DateTime dttm;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 12</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 31</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 23</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 59</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 60.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> // 包含小数秒</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 规范化日期时间 </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;规范化前:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">              &lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; &quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    aDateTimeNormalizeUTC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(dttm);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;规范化后:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">              &lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; &quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-儒略日转换" tabindex="-1"><a class="header-anchor" href="#_2-儒略日转换"><span>2. 儒略日转换</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;AstCore/JulianDate.hpp&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;AstCore/DateTime.hpp&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    AST_USING_NAMESPACE</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 创建日期时间对象</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    DateTime dttm;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;原始日期时间:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">              &lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; &quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 转换为儒略日</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    JulianDate jd;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    aDateTimeToJD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(dttm, jd);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;儒略日:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> jd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">impreciseDay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 转换回日期时间</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    DateTime dttm2;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    aJDToDateTime</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(jd, dttm2);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;转换回日期时间：&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">              &lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; &quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-时间系统转换" tabindex="-1"><a class="header-anchor" href="#_3-时间系统转换"><span>3. 时间系统转换</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;AstCore/TimeSystem.hpp&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;AstCore/DateTime.hpp&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;AstCore/JulianDate.hpp&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;iostream&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    AST_USING_NAMESPACE</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 创建日期时间对象</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    DateTime dttm;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">    dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;UTC 日期时间:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">year</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">month</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;-&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">day</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">              &lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot; &quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">hour</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">minute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> dttm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 转换为儒略日</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    JulianDate utc_jd;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    aDateTimeToJD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(dttm, utc_jd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;UTC 儒略日:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> utc_jd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">impreciseDay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 转换为TAI时间</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    JulianDate tai_jd;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    aUTCToTAI</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(utc_jd, tai_jd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;TAI 儒略日:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> tai_jd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">impreciseDay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // 转换为TT时间</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    JulianDate tt_jd;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    aUTCToTT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(utc_jd, tt_jd);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;TT 儒略日:&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> tt_jd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">impreciseDay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="依赖关系" tabindex="-1"><a class="header-anchor" href="#依赖关系"><span>依赖关系</span></a></h2><ul><li><code>AstGlobal.h</code>: 项目全局定义</li><li><code>AstUtil/StringView.hpp</code>: 字符串处理支持</li><li><code>AstCore/Constants.h</code>: 常数定义</li></ul><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h2><ul><li>所有时间参数默认使用秒(s)</li><li>角度参数默认使用弧度(rad)</li><li>部分转换函数考虑了闰秒，部分则不考虑，请查看函数文档</li><li>使用单个double表示的时间精度有限，长时间跨度建议使用DaySecDuration或LongDuration</li><li>日期时间规范化函数有多个版本（本地时间、UTC时间、北京时间），请根据需要选择</li><li>儒略日和简约儒略日之间的转换有精确和不精确两种版本</li></ul><h2 id="api参考" tabindex="-1"><a class="header-anchor" href="#api参考"><span>API参考</span></a></h2><div class="language-hpp line-numbers-mode" data-highlighter="shiki" data-ext="hpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-hpp"><span class="line"><span>///</span></span>
<span class="line"><span>/// @file      Date.hpp</span></span>
<span class="line"><span>/// @brief     </span></span>
<span class="line"><span>/// @details   ~</span></span>
<span class="line"><span>/// @author    axel</span></span>
<span class="line"><span>/// @date      21.11.2025</span></span>
<span class="line"><span>/// @copyright 版权所有 (C) 2025-present, ast项目.</span></span>
<span class="line"><span>///</span></span>
<span class="line"><span>/// ast项目（https://github.com/space-ast/ast）</span></span>
<span class="line"><span>/// 本项目基于 Apache 2.0 开源许可证分发。</span></span>
<span class="line"><span>/// 您可在遵守许可证条款的前提下使用、修改和分发本软件。</span></span>
<span class="line"><span>/// 许可证全文请见：</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>///    http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>/// 重要须知：</span></span>
<span class="line"><span>/// 软件按“现有状态”提供，无任何明示或暗示的担保条件。</span></span>
<span class="line"><span>/// 除非法律要求或书面同意，作者与贡献者不承担任何责任。</span></span>
<span class="line"><span>/// 使用本软件所产生的风险，需由您自行承担。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#pragma once</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#include &quot;AstGlobal.h&quot;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_BEGIN</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>class Date;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取月份的完整英文名称</span></span>
<span class="line"><span>/// @param month 月份，从1开始计数（1表示一月）</span></span>
<span class="line"><span>AST_CORE_CAPI const char* aMoonFullName(int month);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取月份的简写英文名称</span></span>
<span class="line"><span>/// @param month 月份，从1开始计数（1表示一月）</span></span>
<span class="line"><span>AST_CORE_CAPI const char* aMoonShortName(int month);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取星期几的完整英文名称</span></span>
<span class="line"><span>/// @param wday 星期几，从0开始计数（0表示星期日）</span></span>
<span class="line"><span>AST_CORE_CAPI const char* aWeekDayFullName(int wday);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取星期几的简写英文名称</span></span>
<span class="line"><span>/// @param wday 星期几，从0开始计数（0表示星期日）</span></span>
<span class="line"><span>AST_CORE_CAPI const char* aWeekDayShortName(int wday);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 判断是否为闰年</span></span>
<span class="line"><span>AST_CORE_CAPI bool aIsLeapYear(int year);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取某年某月的天数，根据年份判断</span></span>
<span class="line"><span>/// @param month 月份，从1开始计数（1表示一月）</span></span>
<span class="line"><span>/// @param year 年份</span></span>
<span class="line"><span>AST_CORE_CAPI int aDaysInMonthByYear(int month, int year);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取某年某月的天数，根据是否为闰年判断</span></span>
<span class="line"><span>/// @param month 月份，从1开始计数（1表示一月）</span></span>
<span class="line"><span>/// @param isLeapYear 是否为闰年</span></span>
<span class="line"><span>AST_CORE_CAPI int aDaysInMonthByLeap(int month, bool isLeapYear);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取日期是这一年的第几天，从1开始计数</span></span>
<span class="line"><span>AST_CORE_CAPI int aDayOfYear(const Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取日期是这一周的第几天</span></span>
<span class="line"><span>/// @param date 日期对象</span></span>
<span class="line"><span>/// @return 星期几，从0开始计数（0表示星期日）</span></span>
<span class="line"><span>AST_CORE_CAPI int aDayOfWeek(const Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将年份和一年中的天数转换为日期</span></span>
<span class="line"><span>AST_CORE_CAPI void aYDToDate(int year, int days, Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将日期转换为年份和一年中的天数</span></span>
<span class="line"><span>AST_CORE_CAPI void aDateToYD(const Date&amp; date, int&amp; year, int&amp; days);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 规范化日期对象</span></span>
<span class="line"><span>AST_CORE_CAPI void aDateNormalize(Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将日期转换为当天中午12点的儒略日数</span></span>
<span class="line"><span>AST_CORE_CAPI int aDateToJDAtNoon(const Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将当天中午12点的儒略日数转换为当天日期</span></span>
<span class="line"><span>AST_CORE_CAPI void aJDToDateAtNoon(int jd, Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将日期转换为当天00:00的儒略日数</span></span>
<span class="line"><span>AST_CORE_CAPI ImpreciseJD aDateToJD(const Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将儒略日数转换为当天日期</span></span>
<span class="line"><span>/// @param jd 当天00:00的儒略日数</span></span>
<span class="line"><span>/// @param date 日期对象</span></span>
<span class="line"><span>/// @param secInDay 可选参数，用于返回当天00:00后的秒数</span></span>
<span class="line"><span>AST_CORE_CAPI void aJDToDate(ImpreciseJD jd, Date&amp; date, double* secInDay=nullptr);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将日期转换为当天00:00的简约儒略日</span></span>
<span class="line"><span>AST_CORE_CAPI int aDateToMJD(const Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将当天00:00的简约儒略日转换为当天日期</span></span>
<span class="line"><span>AST_CORE_CAPI void aMJDToDate(int mjd, Date&amp; date);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 日期</span></span>
<span class="line"><span>class Date</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 月份，从1开始计数（1表示一月）</span></span>
<span class="line"><span>    enum EMonth{</span></span>
<span class="line"><span>        eJAN = 1, eFEB, eMAR, eAPR, eMAY, eJUN,</span></span>
<span class="line"><span>        eJUL = 7, eAUG, eSEP, eOCT, eNOV, eDEC</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 星期几，从0开始计数（0表示星期日）</span></span>
<span class="line"><span>    enum EWeekDay{</span></span>
<span class="line"><span>        eSUN = 0, eMON, eTUE, eWED, eTHU, eFRI, eSAT</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span></span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 根据儒略日数创建日期对象</span></span>
<span class="line"><span>    static Date FromJDAtNoon(int jd){</span></span>
<span class="line"><span>        Date date;</span></span>
<span class="line"><span>        aJDToDateAtNoon(jd, date);</span></span>
<span class="line"><span>        return date;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    /// @brief 根据年份、月份、日期创建日期对象</span></span>
<span class="line"><span>    static Date FromYMD(int year, int month, int day){</span></span>
<span class="line"><span>        return {year, month, day};</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 根据年份、一年中的天数创建日期对象</span></span>
<span class="line"><span>    static Date FromYD(int year, double days){</span></span>
<span class="line"><span>        Date date;</span></span>
<span class="line"><span>        aYDToDate(year, days, date);</span></span>
<span class="line"><span>        return date;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int year() const{return year_;}</span></span>
<span class="line"><span>    int&amp; year(){return year_;}</span></span>
<span class="line"><span>    int month() const{return month_;}</span></span>
<span class="line"><span>    int&amp; month(){return month_;}</span></span>
<span class="line"><span>    int day() const{return day_;}</span></span>
<span class="line"><span>    int&amp; day(){return day_;}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    void setYear(int year){year_ = year;}</span></span>
<span class="line"><span>    void setMonth(int month){month_ = month;}</span></span>
<span class="line"><span>    void setDay(int day){day_ = day;}</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 获取月份的完整英文名称</span></span>
<span class="line"><span>    const char* monthFullName() const{</span></span>
<span class="line"><span>        return aMoonFullName(month_);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 获取月份的简写英文名称</span></span>
<span class="line"><span>    const char* monthShortName() const{</span></span>
<span class="line"><span>        return aMoonShortName(month_);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 获取星期几的完整英文名称</span></span>
<span class="line"><span>    const char* weekDayFullName() const{</span></span>
<span class="line"><span>        return aWeekDayFullName(dayOfWeek());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 获取星期几的简写英文名称</span></span>
<span class="line"><span>    const char* weekDayShortName() const{</span></span>
<span class="line"><span>        return aWeekDayShortName(dayOfWeek());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 获取日期是这一周的第几天</span></span>
<span class="line"><span>    int dayOfWeek() const{</span></span>
<span class="line"><span>        return aDayOfWeek(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 获取日期是这一年的第几天，从1开始计数</span></span>
<span class="line"><span>    /// @return 第几天</span></span>
<span class="line"><span>    int dayOfYear() const{</span></span>
<span class="line"><span>        return aDayOfYear(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 判断是否为闰年</span></span>
<span class="line"><span>    bool isLeapYear() const{</span></span>
<span class="line"><span>        return aIsLeapYear(year_);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 获取该月的天数</span></span>
<span class="line"><span>    int dayInMonth() const{</span></span>
<span class="line"><span>        return aDaysInMonthByYear(month_, year_);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 将日期转换为儒略日数</span></span>
<span class="line"><span>    int toJDAtNoon() const{</span></span>
<span class="line"><span>        return aDateToJDAtNoon(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 将日期转换为当天00:00的儒略日数</span></span>
<span class="line"><span>    double toJD() const{</span></span>
<span class="line"><span>        return aDateToJD(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    /// @brief 将日期转换为当天00:00的简约儒略日数</span></span>
<span class="line"><span>    double toMJD() const{</span></span>
<span class="line"><span>        return aDateToMJD(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 将当天中午12点的儒略日数转换为日期</span></span>
<span class="line"><span>    void fromJDAtNoon(int jd){</span></span>
<span class="line"><span>        aJDToDateAtNoon(jd, *this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 将年份、月份、日期转换为日期</span></span>
<span class="line"><span>    void fromYMD(int year, int month, int day){</span></span>
<span class="line"><span>        year_ = year;</span></span>
<span class="line"><span>        month_ = month;</span></span>
<span class="line"><span>        day_ = day;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 将年份和一年中的天数转换为日期</span></span>
<span class="line"><span>    void fromYD(int year, int days){</span></span>
<span class="line"><span>        aYDToDate(year, days, *this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 将日期转换为年份和一年中的天数</span></span>
<span class="line"><span>    void toYD(int&amp; year, int&amp; days) const{</span></span>
<span class="line"><span>        aDateToYD(*this, year, days);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 规范化日期对象，将日期调整为有效日期</span></span>
<span class="line"><span>    void normalize(){</span></span>
<span class="line"><span>        aDateNormalize(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    /// @brief 返回规范化后的日期对象副本</span></span>
<span class="line"><span>    Date normalized() const {</span></span>
<span class="line"><span>        Date d = *this;</span></span>
<span class="line"><span>        aDateNormalize(d);</span></span>
<span class="line"><span>        return d;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int year_;          ///&lt; 年</span></span>
<span class="line"><span>    int month_;         ///&lt; 月</span></span>
<span class="line"><span>    int day_;           ///&lt; 日</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将当天00:00的简约儒略日转换为当天日期</span></span>
<span class="line"><span>A_ALWAYS_INLINE Date aMJDToDate(int mjd){</span></span>
<span class="line"><span>    Date date;</span></span>
<span class="line"><span>    aMJDToDate(mjd, date);</span></span>
<span class="line"><span>    return date;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>AST_NAMESPACE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-hpp line-numbers-mode" data-highlighter="shiki" data-ext="hpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-hpp"><span class="line"><span>///</span></span>
<span class="line"><span>/// @file      Time.hpp</span></span>
<span class="line"><span>/// @brief     </span></span>
<span class="line"><span>/// @details   ~</span></span>
<span class="line"><span>/// @author    axel</span></span>
<span class="line"><span>/// @date      21.11.2025</span></span>
<span class="line"><span>/// @copyright 版权所有 (C) 2025-present, ast项目.</span></span>
<span class="line"><span>///</span></span>
<span class="line"><span>/// ast项目（https://github.com/space-ast/ast）</span></span>
<span class="line"><span>/// 本项目基于 Apache 2.0 开源许可证分发。</span></span>
<span class="line"><span>/// 您可在遵守许可证条款的前提下使用、修改和分发本软件。</span></span>
<span class="line"><span>/// 许可证全文请见：</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>///    http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>/// 重要须知：</span></span>
<span class="line"><span>/// 软件按“现有状态”提供，无任何明示或暗示的担保条件。</span></span>
<span class="line"><span>/// 除非法律要求或书面同意，作者与贡献者不承担任何责任。</span></span>
<span class="line"><span>/// 使用本软件所产生的风险，需由您自行承担。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#pragma once</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#include &quot;AstGlobal.h&quot;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_BEGIN</span></span>
<span class="line"><span></span></span>
<span class="line"><span>class Time;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 规范化时间对象</span></span>
<span class="line"><span>/// @details 将时间中的秒、分进行进位或借位调整，使其处于合理范围内（0-59）</span></span>
<span class="line"><span>/// @param time 要规范化的时间对象</span></span>
<span class="line"><span>AST_CORE_CAPI void aTimeNormalize(Time&amp; time);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从总秒数创建时间对象</span></span>
<span class="line"><span>/// @details 根据总秒数计算时、分、秒，并将结果存储在时间对象中</span></span>
<span class="line"><span>/// @param totalSecond 总秒数</span></span>
<span class="line"><span>/// @param time 要存储结果的时间对象</span></span>
<span class="line"><span>AST_CORE_CAPI void aTimeFromTotalSecond(double totalSecond, Time&amp; time);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 时间</span></span>
<span class="line"><span>class Time</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int hour() const{return hour_;}</span></span>
<span class="line"><span>    int&amp; hour(){return hour_;}</span></span>
<span class="line"><span>    int minute() const{return minute_;}</span></span>
<span class="line"><span>    int&amp; minute(){return minute_;}</span></span>
<span class="line"><span>    double second() const{return second_;}</span></span>
<span class="line"><span>    double&amp; second(){return second_;}</span></span>
<span class="line"><span>    void setHour(int hour){hour_ = hour;}</span></span>
<span class="line"><span>    void setMinute(int minute){minute_ = minute;}</span></span>
<span class="line"><span>    void setSecond(double second){second_ = second;}</span></span>
<span class="line"><span>    /// @brief 获取时间对象的总秒数</span></span>
<span class="line"><span>    /// @details 计算时间对象表示的总秒数，包括时、分、秒</span></span>
<span class="line"><span>    /// @return 时间对象的总秒数</span></span>
<span class="line"><span>    double totalSecond() const{return hour_ * 3600 + minute_ * 60 + second_;}</span></span>
<span class="line"><span>    /// @brief 获取时间对象的日分数</span></span>
<span class="line"><span>    /// @details 计算时间对象表示的日分数，范围为0-1</span></span>
<span class="line"><span>    /// @return 时间对象的日分数</span></span>
<span class="line"><span>    double dayFraction() const{return second_ / 86400.0 + minute_ / 1440.0 + hour_ / 24.0;}</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 规范化时间对象</span></span>
<span class="line"><span>    /// @details 将时间中的秒、分进行进位或借位调整，使其处于合理范围内（0-59）</span></span>
<span class="line"><span>    void normalize(){</span></span>
<span class="line"><span>        aTimeNormalize(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    /// @brief 获取规范化后的时间对象副本</span></span>
<span class="line"><span>    Time normalized() const{</span></span>
<span class="line"><span>        Time t = *this;</span></span>
<span class="line"><span>        aTimeNormalize(t);</span></span>
<span class="line"><span>        return t;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int    hour_;       ///&lt; 时</span></span>
<span class="line"><span>    int    minute_;     ///&lt; 分</span></span>
<span class="line"><span>    double second_;     ///&lt; 秒</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span> </span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-hpp line-numbers-mode" data-highlighter="shiki" data-ext="hpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-hpp"><span class="line"><span>///</span></span>
<span class="line"><span>/// @file      DataTime.hpp</span></span>
<span class="line"><span>/// @brief     </span></span>
<span class="line"><span>/// @details   ~</span></span>
<span class="line"><span>/// @author    axel</span></span>
<span class="line"><span>/// @date      21.11.2025</span></span>
<span class="line"><span>/// @copyright 版权所有 (C) 2025-present, ast项目.</span></span>
<span class="line"><span>///</span></span>
<span class="line"><span>/// ast项目（https://github.com/space-ast/ast）</span></span>
<span class="line"><span>/// 本项目基于 Apache 2.0 开源许可证分发。</span></span>
<span class="line"><span>/// 您可在遵守许可证条款的前提下使用、修改和分发本软件。</span></span>
<span class="line"><span>/// 许可证全文请见：</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>///    http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>/// 重要须知：</span></span>
<span class="line"><span>/// 软件按“现有状态”提供，无任何明示或暗示的担保条件。</span></span>
<span class="line"><span>/// 除非法律要求或书面同意，作者与贡献者不承担任何责任。</span></span>
<span class="line"><span>/// 使用本软件所产生的风险，需由您自行承担。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#pragma once</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#include &quot;AstUtil/StringView.hpp&quot;</span></span>
<span class="line"><span>#include &quot;AstGlobal.h&quot;</span></span>
<span class="line"><span>#include &quot;Date.hpp&quot;</span></span>
<span class="line"><span>#include &quot;Time.hpp&quot;</span></span>
<span class="line"><span>#include &lt;time.h&gt;</span></span>
<span class="line"><span>#include &lt;string&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>struct tm;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>AST_NAMESPACE_BEGIN</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>class DateTime;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取当前本地日期时间</span></span>
<span class="line"><span>AST_CORE_CAPI void aCurrentDateTimeLocal(DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 获取当前UTC日期时间</span></span>
<span class="line"><span>AST_CORE_CAPI void aCurrentDateTimeUTC(DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 规范化日期时间对象</span></span>
<span class="line"><span>/// @details 将时间调整到0-23时59分59秒之间，并调整日期到正确的范围内，不考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeNormalize(DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 规范化日期时间对象(按UTC时间规范化)</span></span>
<span class="line"><span>/// @details 将日期时间对象调整到0-23时59分60秒，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeNormalizeUTC(DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 规范化日期时间对象(按本地时间规范化)</span></span>
<span class="line"><span>/// @details 将日期时间对象调整到0-23时59分60秒，考虑时区和闰秒</span></span>
<span class="line"><span>/// @param dttm 本地时间</span></span>
<span class="line"><span>/// @param timezone 时区偏移，单位：小时</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeNormalizeLocal(DateTime&amp; dttm, int timezone);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 规范化日期时间对象(按北京时间规范化)</span></span>
<span class="line"><span>/// @details 将日期时间对象调整到0-23时59分60秒，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm 北京时间</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeNormalizeBJT(DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加年</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的年数，并规范化日期时间对象</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param years </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddYears(DateTime&amp; dttm, int years);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加月</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的月数，并规范化日期时间对象</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param months </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddMonths(DateTime&amp; dttm, int months);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加日</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的天数，并规范化日期时间对象，不考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param days </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddDays(DateTime&amp; dttm, int days);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加日（UTC时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的天数(days*86400s)（UTC时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param days 增加的天数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddDaysUTC(DateTime&amp; dttm, int days);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加日（本地时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的天数(days*86400s)（本地时间），并规范化日期时间对象，考虑时区和闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param days 增加的天数，可正可负</span></span>
<span class="line"><span>/// @param timezone 时区偏移，单位：小时</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddDaysLocal(DateTime&amp; dttm, int days, int timezone);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加日（北京时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的天数(days*86400s)（北京时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param days 增加的天数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddDaysBJT(DateTime&amp; dttm, int days);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加时</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的小时数(hours*3600s)，并规范化日期时间对象，不考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param hours 增加的小时数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddHours(DateTime&amp; dttm, int hours);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加时（UTC时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的小时数(hours*3600s)（UTC时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param hours 增加的小时数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddHoursUTC(DateTime&amp; dttm, int hours);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加时（本地时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的小时数(hours*3600s)（本地时间），并规范化日期时间对象，考虑时区和闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param hours 增加的小时数，可正可负</span></span>
<span class="line"><span>/// @param timezone 时区偏移，单位：小时</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddHoursLocal(DateTime&amp; dttm, int hours, int timezone);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加时（北京时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的小时数(hours*3600s)（北京时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param hours 增加的小时数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddHoursBJT(DateTime&amp; dttm, int hours);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加分</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的分钟数(minutes*60s)，并规范化日期时间对象，不考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param minutes 增加的分钟数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddMinutes(DateTime&amp; dttm, int minutes);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加分（UTC时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的分钟数（UTC时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param minutes 增加的分钟数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddMinutesUTC(DateTime&amp; dttm, int minutes);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加分（本地时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的分钟数(minutes*60s)（本地时间），并规范化日期时间对象，考虑时区和闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param minutes 增加的分钟数，可正可负</span></span>
<span class="line"><span>/// @param timezone 时区偏移，单位：小时</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddMinutesLocal(DateTime&amp; dttm, int minutes, int timezone);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加分（北京时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的分钟数(minutes*60s)（北京时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param minutes 增加的分钟数，可正可负</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddMinutesBJT(DateTime&amp; dttm, int minutes);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加秒</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的秒数，并规范化日期时间对象，不考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param seconds </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddSeconds(DateTime&amp; dttm, double seconds);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加秒（UTC时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的秒数（UTC时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param seconds </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddSecondsUTC(DateTime&amp; dttm, double seconds);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加秒（本地时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的秒数（本地时间），并规范化日期时间对象，考虑时区和闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param seconds </span></span>
<span class="line"><span>/// @param timezone 时区偏移，单位：小时</span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddSecondsLocal(DateTime&amp; dttm, double seconds, int timezone);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 增加秒（北京时间）</span></span>
<span class="line"><span>/// @details 将日期时间对象增加指定的秒数（北京时间），并规范化日期时间对象，考虑闰秒</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param seconds </span></span>
<span class="line"><span>/// @return </span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeAddSecondsBJT(DateTime&amp; dttm, double seconds);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为字符串</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为指定格式的字符串</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param format 格式化字符串，例如：&quot;%Y-%m-%d %H:%M:%S&quot;</span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormat(const DateTime&amp; dttm, StringView format, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为格里高利历格式</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为格里高利历格式的字符串，例如：2025-11-21 12:34:56</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormatGregorian(const DateTime&amp; dttm, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为格里高利历格式（英文）</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为格里高利历格式的字符串（英文），例如：1 Jan 1970 00:00:00</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormatGregorianEn(const DateTime&amp; dttm, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为GMT格式</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为GMT格式的字符串，例如：Sat, 21 Nov 2025 12:34:56 GMT</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormatGMT(const DateTime&amp; dttm, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为ISO 8601格式</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为ISO 8601格式的字符串，例如：2025-11-21T12:34:56Z</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormatISO8601(const DateTime&amp; dttm, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为简单ISO 8601格式</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为ISO 8601格式的字符串，例如：2025-11-21 12:34:56</span></span>
<span class="line"><span>A_ALWAYS_INLINE err_t aDateTimeFormatISO(const DateTime&amp; dttm, std::string&amp; str)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    return aDateTimeFormatISO8601(dttm, str);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为RFC 3339格式</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为RFC 3339格式的字符串，例如：2025-11-21T12:34:56+08:00</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormatRFC3339(const DateTime&amp; dttm, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#ifdef AST_ENABLE_DATETIME_FORMAT_RFC // 启用其他RFC日期时间格式化</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为RFC 1123格式</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为RFC 1123格式的字符串，</span></span>
<span class="line"><span>/// 例如：Sat, 21 Nov 2025 12:34:56 GMT</span></span>
<span class="line"><span>/// 时区必须使用 GMT（RFC 1123 要求始终使用格林尼治时间）</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormatRFC1123(const DateTime&amp; dttm, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 格式化日期时间为RFC 2822格式</span></span>
<span class="line"><span>/// @details 将日期时间对象格式化为RFC 2822格式的字符串，</span></span>
<span class="line"><span>/// 例如：Sat, 21 Nov 2025 12:34:56 +0800</span></span>
<span class="line"><span>///       Wed, 18 Feb 2015 23:16:09 GMT</span></span>
<span class="line"><span>/// 时区可以是 &quot;+0000&quot; 格式的数字时区，或者是 &quot;GMT&quot;、&quot;UTC&quot; 等标准时区名称</span></span>
<span class="line"><span>/// @param dttm </span></span>
<span class="line"><span>/// @param str </span></span>
<span class="line"><span>/// @return err_t </span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeFormatRFC2822(const DateTime&amp; dttm, std::string&amp; str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#endif</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 解析ISO 8601格式的日期时间字符串</span></span>
<span class="line"><span>/// @details 将ISO 8601格式的字符串解析为日期时间对象</span></span>
<span class="line"><span>/// @param str 包含ISO 8601格式日期时间的字符串</span></span>
<span class="line"><span>/// @param dttm 输出参数，解析后的日期时间对象</span></span>
<span class="line"><span>/// @return err_t 错误码，eNoError表示成功</span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeParseISO8601(StringView str, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>A_ALWAYS_INLINE err_t aDateTimeParseISO(StringView str, DateTime&amp; dttm)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    return aDateTimeParseISO8601(str, dttm);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 解析RFC 3339格式的日期时间字符串</span></span>
<span class="line"><span>/// @details 将RFC 3339格式的字符串解析为日期时间对象</span></span>
<span class="line"><span>/// @param str 包含RFC 3339格式日期时间的字符串</span></span>
<span class="line"><span>/// @param dttm 输出参数，解析后的日期时间对象</span></span>
<span class="line"><span>/// @return err_t 错误码，eNoError表示成功</span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeParseRFC3339(StringView str, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 解析格里高利历格式的日期时间字符串</span></span>
<span class="line"><span>/// @details 将格里高利历格式的字符串解析为日期时间对象</span></span>
<span class="line"><span>/// @param str 包含格里高利历格式日期时间的字符串</span></span>
<span class="line"><span>/// @param dttm 输出参数，解析后的日期时间对象</span></span>
<span class="line"><span>/// @return err_t 错误码，eNoError表示成功</span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeParseGregorian(StringView str, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 解析格里高利历格式（英文）的日期时间字符串</span></span>
<span class="line"><span>/// @details 将格里高利历格式（英文）的字符串解析为日期时间对象</span></span>
<span class="line"><span>/// @param str 包含格里高利历格式（英文）日期时间的字符串</span></span>
<span class="line"><span>/// @param dttm 输出参数，解析后的日期时间对象</span></span>
<span class="line"><span>/// @return err_t 错误码，eNoError表示成功</span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeParseGregorianEn(StringView str, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 解析GMT格式的日期时间字符串</span></span>
<span class="line"><span>/// @details 将GMT格式的字符串解析为日期时间对象</span></span>
<span class="line"><span>/// @param str 包含GMT格式日期时间的字符串</span></span>
<span class="line"><span>/// @param dttm 输出参数，解析后的日期时间对象</span></span>
<span class="line"><span>/// @return err_t 错误码，eNoError表示成功</span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeParseGMT(StringView str, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 解析自定义格式的日期时间字符串</span></span>
<span class="line"><span>/// @details 将自定义格式的字符串解析为日期时间对象</span></span>
<span class="line"><span>/// @param str 包含自定义格式日期时间的字符串</span></span>
<span class="line"><span>/// @param format 日期时间格式，参考strptime函数的格式规范</span></span>
<span class="line"><span>/// @param dttm 输出参数，解析后的日期时间对象</span></span>
<span class="line"><span>/// @return err_t 错误码，eNoError表示成功</span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeParse(StringView str, StringView format, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 解析任意格式的日期时间字符串</span></span>
<span class="line"><span>/// @details 尝试解析多种日期时间格式，包括ISO 8601、RFC 3339、格里高利历等</span></span>
<span class="line"><span>/// @param str 包含日期时间的字符串</span></span>
<span class="line"><span>/// @param dttm 输出参数，解析后的日期时间对象</span></span>
<span class="line"><span>/// @return err_t 错误码，eNoError表示成功</span></span>
<span class="line"><span>AST_CORE_CAPI err_t aDateTimeParseAny(StringView str, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 日期时间</span></span>
<span class="line"><span>class DateTime</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief </span></span>
<span class="line"><span>    enum ETimeZone{</span></span>
<span class="line"><span>        eUTC = 0,   ///&lt; UTC时间（东0区）</span></span>
<span class="line"><span>        eBJT = 8,   ///&lt; 北京时间（东8区）</span></span>
<span class="line"><span>    };</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 从儒略日数创建日期时间对象</span></span>
<span class="line"><span>    /// @param jd 儒略日数</span></span>
<span class="line"><span>    /// @return DateTime 日期时间对象</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static DateTime FromJD(const JulianDate&amp; jd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 从儒略日数创建日期时间对象</span></span>
<span class="line"><span>    /// @param jd 儒略日数</span></span>
<span class="line"><span>    /// @return DateTime 日期时间对象</span></span>
<span class="line"><span>    A_ALWAYS_INLINE</span></span>
<span class="line"><span>    static DateTime FromJulianDate(const JulianDate&amp; jd){return FromJD(jd);}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 从字符串解析日期时间</span></span>
<span class="line"><span>    /// @param str 包含日期时间的字符串</span></span>
<span class="line"><span>    /// @param format 日期时间格式，参考strptime函数的格式规范</span></span>
<span class="line"><span>    /// @return DateTime 解析后的日期时间对象</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static DateTime FromString(StringView str, StringView format);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 从字符串解析日期时间（默认格式：&quot;yyyy-MM-dd HH:mm:ss&quot;）</span></span>
<span class="line"><span>    /// @param str 包含日期时间的字符串</span></span>
<span class="line"><span>    /// @return DateTime 解析后的日期时间对象</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static DateTime FromString(StringView str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 从格里高利历日期时间创建日期时间对象</span></span>
<span class="line"><span>    /// @return DateTime 日期时间对象</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static DateTime FromGregorian(StringView str);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 根据系统时间创建日期时间对象</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static DateTime FromTm(const tm* time);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 根据time_t创建本地时间的日期时间对象</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static DateTime FromTimeTLocal(time_t time);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 根据time_t创建UTC时间的日期时间对象</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static DateTime FromTimeTUTC(time_t time);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>public: </span></span>
<span class="line"><span>    const Date&amp; date() const{return date_;}</span></span>
<span class="line"><span>    Date&amp; date() {return date_;}</span></span>
<span class="line"><span>    const Time&amp; time() const {return time_;}</span></span>
<span class="line"><span>    Time&amp; time() {return time_;}</span></span>
<span class="line"><span>    int year() const {return date_.year();}</span></span>
<span class="line"><span>    int&amp; year() {return date_.year();}</span></span>
<span class="line"><span>    int month() const {return date_.month();}</span></span>
<span class="line"><span>    int&amp; month() {return date_.month();}</span></span>
<span class="line"><span>    int day() const {return date_.day();}</span></span>
<span class="line"><span>    int&amp; day() {return date_.day();}</span></span>
<span class="line"><span>    int hour() const {return time_.hour();}</span></span>
<span class="line"><span>    int&amp; hour() {return time_.hour();}</span></span>
<span class="line"><span>    int minute() const {return time_.minute();}</span></span>
<span class="line"><span>    int&amp; minute() {return time_.minute();}</span></span>
<span class="line"><span>    double second() const {return time_.second();}</span></span>
<span class="line"><span>    double&amp; second() {return time_.second();}</span></span>
<span class="line"><span>    int dayOfYear() const {return date_.dayOfYear();}</span></span>
<span class="line"><span>    int dayOfWeek() const {return date_.dayOfWeek();}</span></span>
<span class="line"><span>    void setYear(int year) {date_.setYear(year);}</span></span>
<span class="line"><span>    void setMonth(int month) {date_.setMonth(month);}</span></span>
<span class="line"><span>    void setDay(int day) {date_.setDay(day);}</span></span>
<span class="line"><span>    void setHour(int hour) {time_.setHour(hour);}</span></span>
<span class="line"><span>    void setMinute(int minute) {time_.setMinute(minute);}</span></span>
<span class="line"><span>    void setSecond(double second) {time_.setSecond(second);}</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    void normalize(){</span></span>
<span class="line"><span>        aDateTimeNormalize(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void normalizeUTC(){</span></span>
<span class="line"><span>        aDateTimeNormalizeUTC(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void normalizeLocal(int timezone){</span></span>
<span class="line"><span>        aDateTimeNormalizeLocal(*this, timezone);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void normalizeBJT(){</span></span>
<span class="line"><span>        aDateTimeNormalizeBJT(*this);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DateTime normalized() const{</span></span>
<span class="line"><span>        DateTime dttm = *this;</span></span>
<span class="line"><span>        dttm.normalize();</span></span>
<span class="line"><span>        return dttm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DateTime normalizedUTC() const{</span></span>
<span class="line"><span>        DateTime dttm = *this;</span></span>
<span class="line"><span>        dttm.normalizeUTC();</span></span>
<span class="line"><span>        return dttm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DateTime normalizedLocal(int timezone) const{</span></span>
<span class="line"><span>        DateTime dttm = *this;</span></span>
<span class="line"><span>        dttm.normalizeLocal(timezone);</span></span>
<span class="line"><span>        return dttm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DateTime normalizedBJT() const{</span></span>
<span class="line"><span>        DateTime dttm = *this;</span></span>
<span class="line"><span>        dttm.normalizeBJT();</span></span>
<span class="line"><span>        return dttm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    void addYears(int years){</span></span>
<span class="line"><span>        aDateTimeAddYears(*this, years);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addMonths(int months){</span></span>
<span class="line"><span>        aDateTimeAddMonths(*this, months);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addDays(int days){</span></span>
<span class="line"><span>        aDateTimeAddDays(*this, days);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addDaysUTC(int days){</span></span>
<span class="line"><span>        aDateTimeAddDaysUTC(*this, days);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addDaysLocal(int days, int timezone){</span></span>
<span class="line"><span>        aDateTimeAddDaysLocal(*this, days, timezone);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addDaysBJT(int days){</span></span>
<span class="line"><span>        aDateTimeAddDaysBJT(*this, days);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addHours(int hours){</span></span>
<span class="line"><span>        aDateTimeAddHours(*this, hours);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addHoursUTC(int hours){</span></span>
<span class="line"><span>        aDateTimeAddHoursUTC(*this, hours);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addHoursLocal(int hours, int timezone){</span></span>
<span class="line"><span>        aDateTimeAddHoursLocal(*this, hours, timezone);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addHoursBJT(int hours){</span></span>
<span class="line"><span>        aDateTimeAddHoursBJT(*this, hours);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addMinutes(int minutes){</span></span>
<span class="line"><span>        aDateTimeAddMinutes(*this, minutes);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addMinutesUTC(int minutes){</span></span>
<span class="line"><span>        aDateTimeAddMinutesUTC(*this, minutes);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addMinutesLocal(int minutes, int timezone){</span></span>
<span class="line"><span>        aDateTimeAddMinutesLocal(*this, minutes, timezone);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addMinutesBJT(int minutes){</span></span>
<span class="line"><span>        aDateTimeAddMinutesBJT(*this, minutes);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addSeconds(double seconds){</span></span>
<span class="line"><span>        aDateTimeAddSeconds(*this, seconds);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addSecondsUTC(double seconds){</span></span>
<span class="line"><span>        aDateTimeAddSecondsUTC(*this, seconds);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addSecondsLocal(double seconds, int timezone){</span></span>
<span class="line"><span>        aDateTimeAddSecondsLocal(*this, seconds, timezone);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    void addSecondsBJT(double seconds){</span></span>
<span class="line"><span>        aDateTimeAddSecondsBJT(*this, seconds);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    DateTime&amp; operator += (double sec)</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        this-&gt;second() += sec;  // 适用于任何时间尺度，包括考虑闰秒的和不考虑闰秒的</span></span>
<span class="line"><span>        return *this;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DateTime&amp; operator -= (double sec)</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        this-&gt;second() -= sec;  // 适用于任何时间尺度，包括考虑闰秒的和不考虑闰秒的</span></span>
<span class="line"><span>        return *this;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DateTime operator + (double sec) const</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        auto dttm = DateTime{ *this };</span></span>
<span class="line"><span>        dttm += sec;</span></span>
<span class="line"><span>        return dttm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DateTime operator -(double sec) const</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        auto dttm = DateTime{ *this };</span></span>
<span class="line"><span>        dttm -= sec;</span></span>
<span class="line"><span>        return dttm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    Date date_;     ///&lt; 日期</span></span>
<span class="line"><span>    Time time_;     ///&lt; 时间</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span>A_ALWAYS_INLINE</span></span>
<span class="line"><span>DateTime aCurrentDateTimeLocal()</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    DateTime dttm;</span></span>
<span class="line"><span>    aCurrentDateTimeLocal(dttm);</span></span>
<span class="line"><span>    return dttm;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>A_ALWAYS_INLINE</span></span>
<span class="line"><span>DateTime aCurrentDateTimeUTC()</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    DateTime dttm;</span></span>
<span class="line"><span>    aCurrentDateTimeUTC(dttm);</span></span>
<span class="line"><span>    return dttm;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>AST_NAMESPACE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-hpp line-numbers-mode" data-highlighter="shiki" data-ext="hpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-hpp"><span class="line"><span>///</span></span>
<span class="line"><span>/// @file      JulianDate.hpp</span></span>
<span class="line"><span>/// @brief     </span></span>
<span class="line"><span>/// @details   ~</span></span>
<span class="line"><span>/// @author    axel</span></span>
<span class="line"><span>/// @date      21.11.2025</span></span>
<span class="line"><span>/// @copyright 版权所有 (C) 2025-present, ast项目.</span></span>
<span class="line"><span>///</span></span>
<span class="line"><span>/// ast项目（https://github.com/space-ast/ast）</span></span>
<span class="line"><span>/// 本项目基于 Apache 2.0 开源许可证分发。</span></span>
<span class="line"><span>/// 您可在遵守许可证条款的前提下使用、修改和分发本软件。</span></span>
<span class="line"><span>/// 许可证全文请见：</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>///    http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>/// 重要须知：</span></span>
<span class="line"><span>/// 软件按“现有状态”提供，无任何明示或暗示的担保条件。</span></span>
<span class="line"><span>/// 除非法律要求或书面同意，作者与贡献者不承担任何责任。</span></span>
<span class="line"><span>/// 使用本软件所产生的风险，需由您自行承担。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#pragma once</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#include &quot;AstGlobal.h&quot;</span></span>
<span class="line"><span>#include &quot;Duration.hpp&quot;</span></span>
<span class="line"><span>#include &quot;AstUtil/Constants.h&quot;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_BEGIN</span></span>
<span class="line"><span></span></span>
<span class="line"><span>class JulianDate;</span></span>
<span class="line"><span>class Date;</span></span>
<span class="line"><span>class Time;</span></span>
<span class="line"><span>class DateTime;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将儒略日转换为简约儒略日</span></span>
<span class="line"><span>AST_CORE_CAPI void aJDToMJD(const JulianDate&amp; jd, ModJulianDate&amp; mjd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将简约儒略日转换为儒略日</span></span>
<span class="line"><span>AST_CORE_CAPI void aMJDToJD(const ModJulianDate&amp; mjd, JulianDate&amp; jd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将儒略日转换为简约儒略日</span></span>
<span class="line"><span>/// @warning 注意用单个double表示的时间精度不高</span></span>
<span class="line"><span>AST_CORE_API double aJDToMJD_Imprecise(const JulianDate&amp; jd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将简约儒略日Modified Julian Date（MJD）转换为儒略日</span></span>
<span class="line"><span>/// @warning 注意用单个double表示的时间精度不高</span></span>
<span class="line"><span>AST_CORE_API ImpreciseMJD aJDToMJD_Imprecise(ImpreciseJD jd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将简约儒略日Modified Julian Date（MJD）转换为不精确的儒略日</span></span>
<span class="line"><span>/// @warning 注意用单个double表示的时间精度不高</span></span>
<span class="line"><span>AST_CORE_API ImpreciseJD aMJDToJD_Imprecise(const ModJulianDate&amp; mjd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将儒略日转换为简约儒略日Modified Julian Date（MJD）</span></span>
<span class="line"><span>/// @warning 注意用单个double表示的时间精度不高</span></span>
<span class="line"><span>AST_CORE_API ImpreciseJD aMJDToJD_Imprecise(ImpreciseMJD mjd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将日期时间转换为儒略日</span></span>
<span class="line"><span>AST_CORE_CAPI void aDateTimeToJD(const DateTime&amp; dttm, JulianDate&amp; jd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 将儒略日转换为日期时间</span></span>
<span class="line"><span>AST_CORE_CAPI void aJDToDateTime(const JulianDate&amp; jd, DateTime&amp; dttm);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 儒略日</span></span>
<span class="line"><span>/// @details 儒略日（Julian Date）是一种用于表示时间的方法，常用于天文学和计算机科学中。</span></span>
<span class="line"><span>/// ast项目将其实现为整数天 + 小数秒的形式，保证数值精度</span></span>
<span class="line"><span>class JulianDate</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 根据不精确的天数创建儒略日对象</span></span>
<span class="line"><span>    static JulianDate FromImpreciseDay(double JD){</span></span>
<span class="line"><span>        double day = static_cast&lt;int&gt;(JD);</span></span>
<span class="line"><span>        double second = (JD - day) * 86400.0;</span></span>
<span class="line"><span>        return JulianDate::FromDaySecond(day, second);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 根据天数和秒数创建儒略日对象</span></span>
<span class="line"><span>    static JulianDate FromDaySecond(int day, double second){</span></span>
<span class="line"><span>        return JulianDate{day, second};</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 根据日期时间创建儒略日对象</span></span>
<span class="line"><span>    static JulianDate FromDateTime(const DateTime&amp; dttm)</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        JulianDate jd;</span></span>
<span class="line"><span>        aDateTimeToJD(dttm, jd);</span></span>
<span class="line"><span>        return jd;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    AST_CORE_API</span></span>
<span class="line"><span>    static JulianDate FromDateTime(int year, int month, int day, int hour, int minute, double second);</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 获取不精确的天数</span></span>
<span class="line"><span>    /// @return 不精确的天数</span></span>
<span class="line"><span>    double impreciseDay() const{return day_ + second_ /86400.;}</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    /// @brief 设置不精确的天数</span></span>
<span class="line"><span>    void setImpreciseDay(double jd){</span></span>
<span class="line"><span>        double day = static_cast&lt;int&gt;(jd);</span></span>
<span class="line"><span>        double second = (jd - day) * 86400.0;</span></span>
<span class="line"><span>        setDaySecond(day, second);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int day() const{return day_;}</span></span>
<span class="line"><span>    int&amp; day(){return day_;}</span></span>
<span class="line"><span>    double second() const {return second_;}</span></span>
<span class="line"><span>    double&amp; second(){return second_;}</span></span>
<span class="line"><span>    void setDay(double day){day_ = day;}</span></span>
<span class="line"><span>    void setSecond(double sec){second_ = sec;}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 获取天数和秒数</span></span>
<span class="line"><span>    void getDaySecond(int&amp; day, double&amp; second) const{</span></span>
<span class="line"><span>        day = day_;</span></span>
<span class="line"><span>        second = second_;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 设置天数和秒数</span></span>
<span class="line"><span>    void setDaySecond(int day, double second){</span></span>
<span class="line"><span>        day_ = day;</span></span>
<span class="line"><span>        second_ = second;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 获取小数部分的日数</span></span>
<span class="line"><span>    double dayFractional() const{</span></span>
<span class="line"><span>        return second_ / kSecondsPerDay;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 设置小数部分的日数</span></span>
<span class="line"><span>    void setDayFractional(double df){</span></span>
<span class="line"><span>        second_ = df * kSecondsPerDay;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 计算儒略日与 J2000.0 历元的时间差（儒略世纪）</span></span>
<span class="line"><span>    double julianCenturyFromJ2000() const{</span></span>
<span class="line"><span>        return julianDayFromJ2000() / kDaysPerJulianCentury;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /// @brief 计算儒略日与 J2000.0 历元的时间差（儒略日）</span></span>
<span class="line"><span>    double julianDayFromJ2000() const{</span></span>
<span class="line"><span>        return ((day_ - kJ2000Epoch) + dayFractional());</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    JulianDate&amp; operator += (double sec)</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        this-&gt;second() += sec;  // 适用于任何时间尺度，包括考核闰秒的和不考虑闰秒的</span></span>
<span class="line"><span>        return *this;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    JulianDate&amp; operator -= (double sec)</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        this-&gt;second() -= sec;  // 适用于任何时间尺度，包括考核闰秒的和不考虑闰秒的</span></span>
<span class="line"><span>        return *this;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    JulianDate operator + (double sec) const</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        JulianDate jd{ *this };</span></span>
<span class="line"><span>        jd += sec;</span></span>
<span class="line"><span>        return jd;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    JulianDate operator - (double sec) const</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        JulianDate jd{ *this };</span></span>
<span class="line"><span>        jd -= sec;</span></span>
<span class="line"><span>        return jd;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    DaySecDuration operator - (const JulianDate&amp; other) const</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        return {day() - other.day(), second() - other.second()};</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int    day_;     // 天数部分 day part of julian date</span></span>
<span class="line"><span>    double second_;  // 秒数部分 second part of julia date</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-hpp line-numbers-mode" data-highlighter="shiki" data-ext="hpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-hpp"><span class="line"><span>///</span></span>
<span class="line"><span>/// @file      ModJulianDate.hpp</span></span>
<span class="line"><span>/// @brief     </span></span>
<span class="line"><span>/// @details   ~</span></span>
<span class="line"><span>/// @author    axel</span></span>
<span class="line"><span>/// @date      30.11.2025</span></span>
<span class="line"><span>/// @copyright 版权所有 (C) 2025-present, ast项目.</span></span>
<span class="line"><span>///</span></span>
<span class="line"><span>/// ast项目（https://github.com/space-ast/ast）</span></span>
<span class="line"><span>/// 本项目基于 Apache 2.0 开源许可证分发。</span></span>
<span class="line"><span>/// 您可在遵守许可证条款的前提下使用、修改和分发本软件。</span></span>
<span class="line"><span>/// 许可证全文请见：</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>///    http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>/// 重要须知：</span></span>
<span class="line"><span>/// 软件按“现有状态”提供，无任何明示或暗示的担保条件。</span></span>
<span class="line"><span>/// 除非法律要求或书面同意，作者与贡献者不承担任何责任。</span></span>
<span class="line"><span>/// 使用本软件所产生的风险，需由您自行承担。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#pragma once</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#include &quot;AstGlobal.h&quot;</span></span>
<span class="line"><span>#include &quot;JulianDate.hpp&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>AST_NAMESPACE_BEGIN</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 简约儒略日</span></span>
<span class="line"><span>class ModJulianDate: protected JulianDate</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    using JulianDate::JulianDate;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    using JulianDate::day;</span></span>
<span class="line"><span>    using JulianDate::second;</span></span>
<span class="line"><span>    using JulianDate::setDay;</span></span>
<span class="line"><span>    using JulianDate::setSecond;</span></span>
<span class="line"><span>    using JulianDate::getDaySecond;</span></span>
<span class="line"><span>    using JulianDate::setDaySecond;</span></span>
<span class="line"><span>    using JulianDate::dayFractional;</span></span>
<span class="line"><span>    using JulianDate::setDayFractional;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    using JulianDate::impreciseDay;</span></span>
<span class="line"><span>    using JulianDate::setImpreciseDay;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    using JulianDate::operator +=;</span></span>
<span class="line"><span>    using JulianDate::operator -=;</span></span>
<span class="line"><span>    using JulianDate::operator +;</span></span>
<span class="line"><span>    using JulianDate::operator -;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>};</span></span>
<span class="line"><span> </span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-hpp line-numbers-mode" data-highlighter="shiki" data-ext="hpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-hpp"><span class="line"><span>///</span></span>
<span class="line"><span>/// @file      Duration.hpp</span></span>
<span class="line"><span>/// @brief     </span></span>
<span class="line"><span>/// @details   ~</span></span>
<span class="line"><span>/// @author    axel</span></span>
<span class="line"><span>/// @date      21.11.2025</span></span>
<span class="line"><span>/// @copyright 版权所有 (C) 2025-present, ast项目.</span></span>
<span class="line"><span>///</span></span>
<span class="line"><span>/// ast项目（https://github.com/space-ast/ast）</span></span>
<span class="line"><span>/// 本项目基于 Apache 2.0 开源许可证分发。</span></span>
<span class="line"><span>/// 您可在遵守许可证条款的前提下使用、修改和分发本软件。</span></span>
<span class="line"><span>/// 许可证全文请见：</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>///    http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>/// 重要须知：</span></span>
<span class="line"><span>/// 软件按“现有状态”提供，无任何明示或暗示的担保条件。</span></span>
<span class="line"><span>/// 除非法律要求或书面同意，作者与贡献者不承担任何责任。</span></span>
<span class="line"><span>/// 使用本软件所产生的风险，需由您自行承担。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#pragma once</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#include &quot;AstGlobal.h&quot;</span></span>
<span class="line"><span>#include &lt;stdint.h&gt;     // for int64_t</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_BEGIN</span></span>
<span class="line"><span> </span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 短时长</span></span>
<span class="line"><span>class ShortDuration</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    double second() const{return second_;}</span></span>
<span class="line"><span>    double&amp; second(){return second_;}</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    double second_;         // 秒数</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 长时长</span></span>
<span class="line"><span>class LongDuration</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 获取整数秒部分</span></span>
<span class="line"><span>    int64_t integer() const{return integer_;}</span></span>
<span class="line"><span>    int64_t&amp; integer(){return integer_;}</span></span>
<span class="line"><span>    /// @brief 获取小数秒部分</span></span>
<span class="line"><span>    double fractional() const{return fractional_;}</span></span>
<span class="line"><span>    double&amp; fractional(){return fractional_;}</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    /// @brief 时长减法运算符</span></span>
<span class="line"><span>    /// @param other 另一个时长</span></span>
<span class="line"><span>    /// @return 两个时长的差值（秒数）</span></span>
<span class="line"><span>    double operator-(const LongDuration&amp; other) const{</span></span>
<span class="line"><span>        return (integer_ - other.integer_) + (fractional_ - other.fractional_);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int64_t integer_;       // 整数秒部分</span></span>
<span class="line"><span>    double  fractional_;    // 小数秒部分</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 整数天 + 小数秒时长（也能解决长时长问题）</span></span>
<span class="line"><span>class DaySecDuration</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    /// @brief 获取整数天部分</span></span>
<span class="line"><span>    int day() const{return day_;}</span></span>
<span class="line"><span>    int&amp; day(){return day_;}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    /// @brief 获取小数部分的秒数</span></span>
<span class="line"><span>    double second() const{return second_;}</span></span>
<span class="line"><span>    double&amp; second(){return second_;}</span></span>
<span class="line"><span>    /// @warning </span></span>
<span class="line"><span>    /// 注意：totalSecond() 方法返回的是一个不精确的double值，</span></span>
<span class="line"><span>    /// 计算会引入舍入误差。且不考虑闰秒等因素。</span></span>
<span class="line"><span>    /// @return 总秒数（整数天秒数 + 小数秒数）</span></span>
<span class="line"><span>    double totalSecond() const{return day_ * 86400.0 + second_;}</span></span>
<span class="line"><span>public:</span></span>
<span class="line"><span>    int    day_;            // 整数天部分</span></span>
<span class="line"><span>    double second_;         // 小数秒部分</span></span>
<span class="line"><span>};</span></span>
<span class="line"><span></span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-hpp line-numbers-mode" data-highlighter="shiki" data-ext="hpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-hpp"><span class="line"><span>///</span></span>
<span class="line"><span>/// @file      TimeSystem.hpp</span></span>
<span class="line"><span>/// @brief     </span></span>
<span class="line"><span>/// @details   ~</span></span>
<span class="line"><span>/// @author    axel</span></span>
<span class="line"><span>/// @date      21.11.2025</span></span>
<span class="line"><span>/// @copyright 版权所有 (C) 2025-present, ast项目.</span></span>
<span class="line"><span>///</span></span>
<span class="line"><span>/// ast项目（https://github.com/space-ast/ast）</span></span>
<span class="line"><span>/// 本项目基于 Apache 2.0 开源许可证分发。</span></span>
<span class="line"><span>/// 您可在遵守许可证条款的前提下使用、修改和分发本软件。</span></span>
<span class="line"><span>/// 许可证全文请见：</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>///    http://www.apache.org/licenses/LICENSE-2.0</span></span>
<span class="line"><span>/// </span></span>
<span class="line"><span>/// 重要须知：</span></span>
<span class="line"><span>/// 软件按“现有状态”提供，无任何明示或暗示的担保条件。</span></span>
<span class="line"><span>/// 除非法律要求或书面同意，作者与贡献者不承担任何责任。</span></span>
<span class="line"><span>/// 使用本软件所产生的风险，需由您自行承担。</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#pragma once</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>#include &quot;AstGlobal.h&quot;</span></span>
<span class="line"><span>#include &quot;AstCore/Constants.h&quot;</span></span>
<span class="line"><span>#include &quot;AstCore/DateTime.hpp&quot;</span></span>
<span class="line"><span>#include &quot;AstCore/JulianDate.hpp&quot;</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>AST_NAMESPACE_BEGIN</span></span>
<span class="line"><span></span></span>
<span class="line"><span>class JulianDate;</span></span>
<span class="line"><span>class DateTime;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从原子时(TAI) 转换为 地球时(TT)</span></span>
<span class="line"><span>/// @param tmTAI 原子时(TAI)</span></span>
<span class="line"><span>/// @param tmTT 地球时(TT)</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE void aTAIToTT(const Time&amp; tmTAI, Time&amp; tmTT)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    tmTT = aTAIToTT(tmTAI);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE Time aTAIToTT(const Time&amp; tmTAI)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    return tmTAI + kTTMinusTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从地球时(TT) 转换为 原子时(TAI)</span></span>
<span class="line"><span>/// @param tmTT 地球时(TT) </span></span>
<span class="line"><span>/// @param tmTAI 原子时(TAI)</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE void aTTToTAI(const Time&amp; tmTT, Time&amp; tmTAI)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    tmTAI = aTTToTAI(tmTT);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE Time aTTToTAI(const Time&amp; tmTT)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    return tmTT - kTTMinusTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从原子时(TAI) 转换为 GPS时</span></span>
<span class="line"><span>/// @param tmTAI 原子时(TAI)</span></span>
<span class="line"><span>/// @param tmGPS GPS时</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE void aTAIToGPS(const Time&amp; tmTAI, Time&amp; tmGPS)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    tmGPS = tmTAI + kGPSMinusTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE Time aTAIToGPS(const Time&amp; tmTAI)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    return tmTAI + kGPSMinusTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从GPS时 转换为 原子时(TAI)</span></span>
<span class="line"><span>/// @param tmGPS GPS时</span></span>
<span class="line"><span>/// @param tmTAI 原子时(TAI)</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE void aGPSToTAI(const Time&amp; tmGPS, Time&amp; tmTAI)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    tmTAI = tmGPS - kGPSMinusTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>template&lt;typename Time&gt;</span></span>
<span class="line"><span>A_ALWAYS_INLINE Time aGPSToTAI(const Time&amp; tmGPS)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    return tmGPS - kGPSMinusTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从原子时(TAI) 转换为 协调世界时(UTC)</span></span>
<span class="line"><span>/// @param jdTAI 原子时(TAI)</span></span>
<span class="line"><span>/// @param jdUTC 协调世界时(UTC)</span></span>
<span class="line"><span>AST_CORE_API void aTAIToUTC(const JulianDate&amp; jdTAI, JulianDate&amp; jdUTC);</span></span>
<span class="line"><span>AST_CORE_API void aTAIToUTC(const DateTime&amp; dttmTAI, DateTime&amp; dttmUTC);</span></span>
<span class="line"><span>A_ALWAYS_INLINE JulianDate aTAIToUTC(const JulianDate&amp; jdTAI)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    JulianDate jdUTC;</span></span>
<span class="line"><span>    aTAIToUTC(jdTAI, jdUTC);</span></span>
<span class="line"><span>    return jdUTC;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>A_ALWAYS_INLINE DateTime aTAIToUTC(const DateTime&amp; dttmTAI)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    DateTime dttmUTC;</span></span>
<span class="line"><span>    aTAIToUTC(dttmTAI, dttmUTC);</span></span>
<span class="line"><span>    return dttmUTC;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从协调世界时(UTC) 转换为 原子时(TAI)</span></span>
<span class="line"><span>/// @param jdUTC 协调世界时(UTC)</span></span>
<span class="line"><span>/// @param jdTAI 原子时(TAI)</span></span>
<span class="line"><span>AST_CORE_API void aUTCToTAI(const JulianDate&amp; jdUTC, JulianDate&amp; jdTAI);</span></span>
<span class="line"><span>AST_CORE_API void aUTCToTAI(const DateTime&amp; dttmUTC, DateTime&amp; dttmTAI);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>A_ALWAYS_INLINE JulianDate aUTCToTAI(const JulianDate&amp; jdUTC)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    JulianDate jdTAI;</span></span>
<span class="line"><span>    aUTCToTAI(jdUTC, jdTAI);</span></span>
<span class="line"><span>    return jdTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>A_ALWAYS_INLINE DateTime aUTCToTAI(const DateTime&amp; dttmUTC)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    DateTime dttmTAI;</span></span>
<span class="line"><span>    aUTCToTAI(dttmUTC, dttmTAI);</span></span>
<span class="line"><span>    return dttmTAI;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从协调世界时(UTC) 转换为 地球时(TT)</span></span>
<span class="line"><span>/// @param jdUTC 协调世界时(UTC)</span></span>
<span class="line"><span>/// @param jdTT 地球时(TT)</span></span>
<span class="line"><span>AST_CORE_API void aUTCToTT(const JulianDate&amp; jdUTC, JulianDate&amp; jdTT);</span></span>
<span class="line"><span>AST_CORE_API void aUTCToTT(const DateTime&amp; dttmUTC, DateTime&amp; dttmTT);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>A_ALWAYS_INLINE JulianDate aUTCToTT(const JulianDate&amp; jdUTC)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    JulianDate jdTT;</span></span>
<span class="line"><span>    aUTCToTT(jdUTC, jdTT);</span></span>
<span class="line"><span>    return jdTT;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>A_ALWAYS_INLINE DateTime aUTCToTT(const DateTime&amp; dttmUTC)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    DateTime dttmTT;</span></span>
<span class="line"><span>    aUTCToTT(dttmUTC, dttmTT);</span></span>
<span class="line"><span>    return dttmTT;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从协调世界时(UTC) 转换为 世界时(UT1)</span></span>
<span class="line"><span>AST_CORE_API void aUTCToUT1(const JulianDate&amp; jdUTC, JulianDate&amp; jdUT1);</span></span>
<span class="line"><span>AST_CORE_API void aUTCToUT1(const DateTime&amp; dttmUTC, DateTime&amp; dttmUT1);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从地球时(TT) 转换为 协调世界时(UTC)</span></span>
<span class="line"><span>/// @param jdTT 地球时(TT)</span></span>
<span class="line"><span>/// @param jdUTC 协调世界时(UTC)</span></span>
<span class="line"><span>AST_CORE_API void aTTToUTC(const JulianDate&amp; jdTT, JulianDate&amp; jdUTC);</span></span>
<span class="line"><span>AST_CORE_API void aTTToUTC(const DateTime&amp; dttmTT, DateTime&amp; dttmUTC);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>A_ALWAYS_INLINE JulianDate aTTToUTC(const JulianDate&amp; jdTT)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    JulianDate jdUTC;</span></span>
<span class="line"><span>    aTTToUTC(jdTT, jdUTC);</span></span>
<span class="line"><span>    return jdUTC;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>A_ALWAYS_INLINE DateTime aTTToUTC(const DateTime&amp; dttmTT)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    DateTime dttmUTC;</span></span>
<span class="line"><span>    aTTToUTC(dttmTT, dttmUTC);</span></span>
<span class="line"><span>    return dttmUTC;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 从地球时(TT) 转换为质心动力学时(TDB)</span></span>
<span class="line"><span>/// @param jdTT 地球时(TT)</span></span>
<span class="line"><span>/// @param jdTDB 质心动力学时(TDB)</span></span>
<span class="line"><span>AST_CORE_API void aTTToTDB(const JulianDate&amp; jdTT, JulianDate&amp; jdTDB);</span></span>
<span class="line"><span>AST_CORE_API void aTTToTDB(const DateTime&amp; dttmTT, DateTime&amp; dttmTDB);</span></span>
<span class="line"><span>A_ALWAYS_INLINE JulianDate aTTToTDB(const JulianDate&amp; jdTT)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    JulianDate jdTDB;</span></span>
<span class="line"><span>    aTTToTDB(jdTT, jdTDB);</span></span>
<span class="line"><span>    return jdTDB;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>A_ALWAYS_INLINE DateTime aTTToTDB(const DateTime&amp; dttmTT)</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    DateTime dttmTDB;</span></span>
<span class="line"><span>    aTTToTDB(dttmTT, dttmTDB);</span></span>
<span class="line"><span>    return dttmTDB;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 计算 质心动力学时(TDB) 时间与 地球时(TT) 时间的差值</span></span>
<span class="line"><span>/// @param jdTT 地球时(TT)</span></span>
<span class="line"><span>/// @return 质心动力学时(TDB) 时间与 地球时(TT) 时间的差值</span></span>
<span class="line"><span>AST_CORE_CAPI double aTDBMinusTT(const JulianDate&amp; jdTT);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/// @brief 计算儒略世纪数，以 J2000.0 为基准</span></span>
<span class="line"><span>/// @param jd 儒略日</span></span>
<span class="line"><span>/// @return 儒略世纪数</span></span>
<span class="line"><span>AST_CORE_CAPI double aJulianCenturyFromJ2000(const JulianDate&amp; jd);</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>AST_NAMESPACE_END</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,30)])])}const r=n(p,[["render",e]]),v=JSON.parse('{"path":"/core/time.html","title":"时间模块","lang":"zh-CN","frontmatter":{"description":"时间模块 说明：本文档旨在帮助理解模块功能，具体API和行为请查阅源代码。 模块概述 Time模块提供了全面的时间处理功能，包括日期、时间、日期时间、儒略日、简约儒略日、时长以及时间系统转换等功能。该模块是天体力学和航天动力学计算的基础组件，支持各种时间表示形式之间的转换和操作。 核心概念 时间表示类型 模块定义了以下主要时间表示类型： Date (日...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"时间模块\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-19T12:16:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"space-ast\\",\\"url\\":\\"https://github.com/space-ast\\"}]}"],["meta",{"property":"og:url","content":"https://github.com/space-ast/ast/ast/core/time.html"}],["meta",{"property":"og:site_name","content":"ast文档"}],["meta",{"property":"og:title","content":"时间模块"}],["meta",{"property":"og:description","content":"时间模块 说明：本文档旨在帮助理解模块功能，具体API和行为请查阅源代码。 模块概述 Time模块提供了全面的时间处理功能，包括日期、时间、日期时间、儒略日、简约儒略日、时长以及时间系统转换等功能。该模块是天体力学和航天动力学计算的基础组件，支持各种时间表示形式之间的转换和操作。 核心概念 时间表示类型 模块定义了以下主要时间表示类型： Date (日..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-19T12:16:05.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-19T12:16:05.000Z"}],["link",{"rel":"alternate","hreflang":"en-us","href":"https://github.com/space-ast/ast/ast/en/core/time.html"}]]},"git":{"createdTime":1766146129000,"updatedTime":1766146565000,"contributors":[{"name":"axel","username":"axel","email":"space_ast@163.com","commits":2,"url":"https://github.com/axel"},{"name":"gemini-code-assist[bot]","username":"gemini-code-assist[bot]","email":"176961590+gemini-code-assist[bot]@users.noreply.github.com","commits":1,"url":"https://github.com/gemini-code-assist[bot]"}]},"readingTime":{"minutes":2.13,"words":639},"filePathRelative":"core/time.md","autoDesc":true}');export{r as comp,v as data};
